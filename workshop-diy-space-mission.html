<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>WKSHP-DIY // MISSION CONTROL</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#020408;color:#00ff41;font-family:'JetBrains Mono',monospace;font-size:10px;overflow:hidden;height:100vh}
.app{display:grid;grid-template-rows:28px 1fr 24px;height:100vh}

/* TOP BAR */
.topbar{background:#060c14;border-bottom:1px solid #0a1a2e;display:flex;align-items:center;padding:0 10px;gap:12px}
.tb-logo{font-family:'Syne',sans-serif;font-size:11px;font-weight:800;color:#0af;letter-spacing:1px}
.tb-mission{font-size:7px;color:#334;letter-spacing:2px;flex:1}
.tb-live{display:flex;align-items:center;gap:4px;font-size:7px;color:#f00;letter-spacing:2px}
.tb-live .dot{width:5px;height:5px;border-radius:50%;background:#f00;animation:pulse 1s infinite}
@keyframes pulse{0%,100%{opacity:.3}50%{opacity:1}}
.tb-clock{font-size:9px;color:#0af}

/* MAIN GRID */
.main{display:grid;grid-template-columns:220px 1fr 200px;grid-template-rows:1fr 1fr;gap:1px;background:#060c14;padding:1px}

/* PANELS */
.panel{background:#020408;border:1px solid #0a1a2e;display:flex;flex-direction:column;overflow:hidden}
.panel-h{padding:4px 8px;background:#060c14;border-bottom:1px solid #0a1a2e;font-size:7px;color:#334;letter-spacing:2px;display:flex;justify-content:space-between;flex-shrink:0}
.panel-h .live{color:#0f0;font-size:6px}
.panel-body{flex:1;padding:6px;overflow-y:auto}
.panel-body::-webkit-scrollbar{width:2px}.panel-body::-webkit-scrollbar-thumb{background:#0a1a2e}

/* COUNTDOWN */
.countdown{grid-column:1;grid-row:1;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}
.cd-label{font-size:6px;color:#334;letter-spacing:3px;margin-bottom:4px}
.cd-time{font-family:'Syne',sans-serif;font-size:clamp(28px,5vw,42px);font-weight:800;color:#0af;text-shadow:0 0 20px rgba(0,170,255,.2);letter-spacing:2px}
.cd-status{font-size:8px;margin-top:6px;padding:3px 12px;border-radius:2px;letter-spacing:2px;font-weight:700}
.cd-status.go{background:rgba(0,255,65,.06);border:1px solid rgba(0,255,65,.15);color:#0f0}
.cd-status.hold{background:rgba(255,170,0,.06);border:1px solid rgba(255,170,0,.15);color:#fa0}
.cd-btn{margin-top:8px;padding:4px 16px;background:rgba(0,170,255,.06);border:1px solid rgba(0,170,255,.15);border-radius:2px;color:#0af;font-family:inherit;font-size:8px;cursor:pointer;letter-spacing:1px;font-weight:700}
.cd-btn:hover{background:rgba(0,170,255,.12);border-color:#0af}

/* TELEMETRY */
.telem-row{display:flex;justify-content:space-between;padding:3px 0;border-bottom:1px solid #060c14}
.telem-row .label{color:#334;font-size:8px}.telem-row .val{color:#0af;font-weight:700;font-size:9px}
.telem-bar{height:3px;background:#060c14;border-radius:2px;margin-top:2px}
.telem-bar .fill{height:100%;border-radius:2px;transition:width .5s}

/* MAP (center) */
.map-panel{grid-column:2;grid-row:1/3;position:relative}
.map-canvas{width:100%;height:100%;background:#020408}

/* MISSION LOG */
.log-entry{padding:3px 0;border-bottom:1px solid #060c14;font-size:8px;display:flex;gap:6px}
.log-time{color:#334;flex-shrink:0;width:45px}.log-type{width:6px;height:6px;border-radius:50%;flex-shrink:0;margin-top:3px}
.log-type.info{background:#0af}.log-type.ok{background:#0f0}.log-type.warn{background:#fa0}.log-type.err{background:#f00}
.log-msg{color:rgba(0,255,65,.5)}

/* SYSTEMS */
.sys-item{display:flex;align-items:center;gap:6px;padding:3px 0;border-bottom:1px solid #060c14}
.sys-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.sys-dot.on{background:#0f0;box-shadow:0 0 4px rgba(0,255,65,.3)}.sys-dot.warn{background:#fa0}.sys-dot.off{background:#f00}
.sys-name{font-size:8px;color:#334;flex:1}.sys-val{font-size:8px;color:#0af}

/* CREW */
.crew{display:flex;flex-direction:column;gap:4px}
.crew-member{display:flex;align-items:center;gap:6px;padding:4px;border:1px solid #0a1a2e;border-radius:2px}
.crew-avatar{font-size:16px}.crew-info .name{font-size:9px;color:#0af;font-weight:700}.crew-info .role{font-size:6px;color:#334;letter-spacing:1px}

/* BOTTOM BAR */
.bottombar{background:#060c14;border-top:1px solid #0a1a2e;display:flex;align-items:center;padding:0 10px;gap:16px;font-size:6px;color:#223;letter-spacing:1px}

/* LAUNCH ANIMATION */
.launch-overlay{position:fixed;inset:0;z-index:100;background:#020408;display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center}
.launch-overlay.on{display:flex}
.launch-count{font-family:'Syne',sans-serif;font-size:clamp(60px,15vw,120px);font-weight:800;color:#0af;text-shadow:0 0 40px rgba(0,170,255,.3)}
.launch-label{font-size:clamp(10px,2vw,16px);color:#334;letter-spacing:6px;margin-top:8px}
.launch-fire{font-size:clamp(30px,8vw,60px);margin-top:12px;animation:rocketGo 2s ease-in forwards;opacity:0}
@keyframes rocketGo{0%{opacity:0;transform:translateY(0)}20%{opacity:1}100%{opacity:0;transform:translateY(-200px)}}
</style>
  <link rel="stylesheet" href="nav.css">
</head>
<body>
<div class="app">
<div class="topbar">
  <div class="tb-logo">WKSHP MISSION CTRL</div>
  <div class="tb-mission">MISSION: DEPLOY-39 // OPERATION MAKER STORM</div>
  <div class="tb-live"><div class="dot"></div>LIVE</div>
  <div class="tb-clock" id="clock">T-00:00:00</div>
</div>

<div class="main">
  <!-- COUNTDOWN -->
  <div class="panel countdown" id="cdPanel">
    <div class="panel-h"><span>LAUNCH COUNTDOWN</span><span class="live">‚óè ACTIVE</span></div>
    <div class="panel-body" style="display:flex;flex-direction:column;align-items:center;justify-content:center">
      <div class="cd-label">TIME TO DEPLOYMENT</div>
      <div class="cd-time" id="cdTime">T-00:30</div>
      <div class="cd-status go" id="cdStatus">ALL SYSTEMS GO</div>
      <button class="cd-btn" id="launchBtn" onclick="startLaunch()">‚ñ∂ INITIATE LAUNCH</button>
    </div>
  </div>

  <!-- MAP -->
  <div class="panel map-panel">
    <div class="panel-h"><span>ORBITAL DEPLOYMENT MAP</span><span class="live">‚óè TRACKING</span></div>
    <canvas class="map-canvas" id="mapCanvas"></canvas>
  </div>

  <!-- SYSTEMS -->
  <div class="panel">
    <div class="panel-h"><span>SYSTEMS STATUS</span></div>
    <div class="panel-body" id="systems"></div>
  </div>

  <!-- TELEMETRY -->
  <div class="panel">
    <div class="panel-h"><span>TELEMETRY</span><span class="live">‚óè LIVE</span></div>
    <div class="panel-body" id="telemetry"></div>
  </div>

  <!-- CREW (hidden behind map, uses remaining space) -->
  <!-- MISSION LOG -->
  <div class="panel">
    <div class="panel-h"><span>MISSION LOG</span></div>
    <div class="panel-body" id="missionLog"></div>
  </div>
</div>

<div class="bottombar">
  <span>WKSHP-DIY SPACE DIVISION</span>
  <span>MISSION: DEPLOY-39</span>
  <span>GROUND: FRANCE üá´üá∑</span>
  <span>PAYLOAD: 39 APPS ¬∑ 7 DOMAINS ¬∑ 12 THEMES</span>
  <span style="margin-left:auto">UPLINK: NOMINAL</span>
</div>
</div>

<!-- LAUNCH OVERLAY -->
<div class="launch-overlay" id="launchOverlay">
  <div class="launch-count" id="launchCount">5</div>
  <div class="launch-label" id="launchLabel">MAIN ENGINE START</div>
  <div class="launch-fire" id="launchFire">üöÄ</div>
</div>

<script>
// SYSTEMS
const SYS=[
{n:"Web Bluetooth",v:"ONLINE"},{n:"MediaPipe AI",v:"READY"},{n:"WebRTC Link",v:"NOMINAL"},
{n:"ESP32 Uplink",v:"CONNECTED"},{n:"micro:bit Array",v:"3 PAIRED"},{n:"Docker Engine",v:"RUNNING"},
{n:"Node-RED Flow",v:"ACTIVE"},{n:"WLED Controller",v:"SYNCED"},{n:"Camera Feed",v:"720p"},
{n:"Terminal Shell",v:"BASH 5.2"},{n:"WiFi Network",v:"password123"},{n:"Coffee Supply",v:"CRITICAL"},
];
const sysEl=document.getElementById('systems');
SYS.forEach(s=>{
  const warn=s.n==='Coffee Supply';
  sysEl.innerHTML+=`<div class="sys-item"><div class="sys-dot ${warn?'warn':'on'}"></div><span class="sys-name">${s.n}</span><span class="sys-val">${s.v}</span></div>`;
});

// TELEMETRY
const TELEM=[
{l:"ALTITUDE",v:"420",u:"km",p:70,c:"#0af"},
{l:"VELOCITY",v:"7.8",u:"km/s",p:85,c:"#0f0"},
{l:"APPS DEPLOYED",v:"39",u:"/39",p:100,c:"#ffd700"},
{l:"SIGNAL",v:"-67",u:"dBm",p:60,c:"#0af"},
{l:"POWER",v:"87",u:"%",p:87,c:"#0f0"},
{l:"CPU TEMP",v:"42",u:"¬∞C",p:45,c:"#fa0"},
{l:"BLE LINKS",v:"3",u:"active",p:30,c:"#0af"},
{l:"BANDWIDTH",v:"54",u:"Mbps",p:65,c:"#0f0"},
];
const telemEl=document.getElementById('telemetry');
function updateTelem(){
  telemEl.innerHTML=TELEM.map(t=>{
    const jitter=Math.floor(Math.random()*5-2);
    const val=parseInt(t.v)+jitter;
    return `<div class="telem-row"><span class="label">${t.l}</span><span class="val">${val}${t.u}</span></div><div class="telem-bar"><div class="fill" style="width:${t.p+jitter}%;background:${t.c}"></div></div>`;
  }).join('');
}
updateTelem();setInterval(updateTelem,2000);

// MISSION LOG
const LOGS=[
  {t:"T-10:00",type:"info",m:"Mission DEPLOY-39 initialized"},
  {t:"T-09:45",type:"ok",m:"All 39 app payloads loaded"},
  {t:"T-09:30",type:"ok",m:"Web Bluetooth subsystem: GO"},
  {t:"T-09:00",type:"ok",m:"MediaPipe AI core: NOMINAL"},
  {t:"T-08:30",type:"ok",m:"ESP32 array handshake confirmed"},
  {t:"T-08:00",type:"warn",m:"Coffee supply below threshold"},
  {t:"T-07:30",type:"ok",m:"WebRTC peer connections: STABLE"},
  {t:"T-07:00",type:"ok",m:"Camera feed calibrated (720p)"},
  {t:"T-06:00",type:"info",m:"Ground crew ready ‚Äî France üá´üá∑"},
  {t:"T-05:00",type:"ok",m:"micro:bit constellation: 3 units paired"},
  {t:"T-04:00",type:"ok",m:"Docker containers: all healthy"},
  {t:"T-03:00",type:"ok",m:"Terminal shell: bash 5.2 loaded"},
  {t:"T-02:00",type:"warn",m:"WiFi password still password123"},
  {t:"T-01:00",type:"ok",m:"Final systems check: ALL GO"},
  {t:"T-00:30",type:"info",m:"Launch sequence armed"},
];
const logEl=document.getElementById('missionLog');
LOGS.forEach(l=>{
  logEl.innerHTML+=`<div class="log-entry"><span class="log-time">${l.t}</span><span class="log-type ${l.type}"></span><span class="log-msg">${l.m}</span></div>`;
});

// Auto-add log entries
const autoLogs=[
  {type:"info",m:"Telemetry stream nominal"},
  {type:"ok",m:"bit-bot responding to commands"},
  {type:"ok",m:"magic-hands: 21 landmarks tracked"},
  {type:"info",m:"face-quest score: 847"},
  {type:"warn",m:"Bug #42 detected ‚Äî reclassified as feature"},
  {type:"ok",m:"teachable-machine: model accuracy 98%"},
  {type:"info",m:"Student connected from classroom"},
];
let logIdx=0;
setInterval(()=>{
  const l=autoLogs[logIdx%autoLogs.length];logIdx++;
  const t=new Date().toTimeString().slice(0,5);
  logEl.innerHTML+=`<div class="log-entry"><span class="log-time">${t}</span><span class="log-type ${l.type}"></span><span class="log-msg">${l.m}</span></div>`;
  logEl.scrollTop=logEl.scrollHeight;
},5000);

// MAP CANVAS
const canvas=document.getElementById('mapCanvas');
const ctx=canvas.getContext('2d');
let cW,cH;
function resizeCanvas(){cW=canvas.width=canvas.offsetWidth;cH=canvas.height=canvas.offsetHeight}
resizeCanvas();addEventListener('resize',resizeCanvas);

// Stars
const stars=[];for(let i=0;i<120;i++)stars.push({x:Math.random(),y:Math.random(),s:Math.random()*1.5+.5,b:Math.random()});

// Orbit nodes (apps)
const orbitApps=[
  {e:"ü§ñ",a:0},{e:"ü™Ñ",a:.5},{e:"üïµÔ∏è",a:1},{e:"üß†",a:1.5},{e:"üí¨",a:2},{e:"üòé",a:2.5},
  {e:"üöÄ",a:3},{e:"üîê",a:3.5},{e:"üêß",a:4},{e:"üí°",a:4.5},{e:"‚ö°",a:5},{e:"üê≥",a:5.5},
];
let orbitAngle=0;

function drawMap(){
  requestAnimationFrame(drawMap);
  ctx.fillStyle='rgba(2,4,8,.2)';ctx.fillRect(0,0,cW,cH);

  // Stars
  stars.forEach(s=>{
    s.b+=.01;
    ctx.fillStyle=`rgba(100,150,255,${.1+Math.sin(s.b)*.1})`;
    ctx.fillRect(s.x*cW,s.y*cH,s.s,s.s);
  });

  // Grid
  ctx.strokeStyle='rgba(0,170,255,.02)';ctx.lineWidth=1;
  for(let i=0;i<cW;i+=40){ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,cH);ctx.stroke()}
  for(let i=0;i<cH;i+=40){ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(cW,i);ctx.stroke()}

  // Earth
  const ex=cW/2,ey=cH/2;
  const er=Math.min(cW,cH)*.08;
  ctx.beginPath();ctx.arc(ex,ey,er,0,Math.PI*2);
  ctx.fillStyle='rgba(0,100,200,.08)';ctx.fill();
  ctx.strokeStyle='rgba(0,170,255,.15)';ctx.stroke();
  ctx.font='bold 8px JetBrains Mono';ctx.fillStyle='rgba(0,170,255,.2)';ctx.textAlign='center';
  ctx.fillText('FRANCE üá´üá∑',ex,ey+3);

  // Orbits
  const orbR1=Math.min(cW,cH)*.25;
  const orbR2=Math.min(cW,cH)*.38;
  ctx.beginPath();ctx.ellipse(ex,ey,orbR1,orbR1*.6,0,0,Math.PI*2);ctx.strokeStyle='rgba(0,170,255,.04)';ctx.stroke();
  ctx.beginPath();ctx.ellipse(ex,ey,orbR2,orbR2*.6,0,0,Math.PI*2);ctx.stroke();

  // App satellites
  orbitAngle+=.003;
  orbitApps.forEach((ap,i)=>{
    const r=i<6?orbR1:orbR2;
    const rY=r*.6;
    const a=orbitAngle+ap.a;
    const x=ex+Math.cos(a)*r;
    const y=ey+Math.sin(a)*rY;
    ctx.font='14px sans-serif';ctx.textAlign='center';
    ctx.fillText(ap.e,x,y+5);
    // Trail
    ctx.beginPath();ctx.arc(x,y,2,0,Math.PI*2);
    ctx.fillStyle='rgba(0,255,65,.1)';ctx.fill();
  });

  // Labels
  ctx.font='7px JetBrains Mono';ctx.fillStyle='rgba(0,170,255,.1)';ctx.textAlign='left';
  ctx.fillText('ORBIT 1: CORE APPS',10,15);
  ctx.fillText('ORBIT 2: EXTENDED',10,25);
  ctx.fillText(`TRACKED: ${orbitApps.length} / 39`,10,cH-10);
}
drawMap();

// CLOCK
setInterval(()=>{document.getElementById('clock').textContent='MET '+new Date().toTimeString().slice(0,8)},1000);

// LAUNCH SEQUENCE
let launching=false;
function startLaunch(){
  if(launching)return;launching=true;
  const overlay=document.getElementById('launchOverlay');
  const countEl=document.getElementById('launchCount');
  const labelEl=document.getElementById('launchLabel');
  const fireEl=document.getElementById('launchFire');
  overlay.classList.add('on');
  let count=5;
  const labels=['MAIN ENGINE START','IGNITION SEQUENCE','BOOSTER SEPARATION','MAX-Q','LIFTOFF!'];
  const interval=setInterval(()=>{
    countEl.textContent=count;
    labelEl.textContent=labels[5-count]||'LIFTOFF!';
    if(count===0){
      clearInterval(interval);
      countEl.textContent='üöÄ';
      labelEl.textContent='39 APPS DEPLOYED SUCCESSFULLY';
      fireEl.style.animation='rocketGo 2s ease-in forwards';
      fireEl.style.opacity='1';
      setTimeout(()=>{
        overlay.classList.remove('on');
        document.getElementById('cdStatus').textContent='MISSION COMPLETE';
        document.getElementById('cdStatus').className='cd-status go';
        document.getElementById('cdTime').textContent='T+00:00';
        document.getElementById('launchBtn').textContent='‚úì DEPLOYED';
        document.getElementById('launchBtn').disabled=true;
        logEl.innerHTML+=`<div class="log-entry"><span class="log-time">${new Date().toTimeString().slice(0,5)}</span><span class="log-type ok"></span><span class="log-msg">üöÄ LAUNCH SUCCESSFUL ‚Äî 39 apps in orbit</span></div>`;
        logEl.scrollTop=logEl.scrollHeight;
      },3000);
    }
    count--;
  },1000);
}
</script>
  <script src="nav.js"></script>
</body>
</html>
